name: pulumi-loop
runtime:
  name: nodejs
  options:
    packagemanager: npm
description: A minimal AWS TypeScript Pulumi program for my loop
config:
  pulumi:tags:
    value:
      pulumi:template: aws-typescript
values:
  aws:
    login:
      fn::open::aws-login:
        oidc:
          duration: 1h
          roleArn: arn:aws:iam::992382825829:role/beneficialmedia-pulumi-esc-oidc-role
          sessionName: pulumi-environments-session
  environmentVariables:
    AWS_ACCESS_KEY_ID: ${aws.login.accessKeyId}
    AWS_SECRET_ACCESS_KEY: ${aws.login.secretAccessKey}
    AWS_SESSION_TOKEN: ${aws.login.sessionToken}
    AWS_REGION: us-east-1
    NEXT_PUBLIC_FIREBASE_API_KEY: ${secrets.firebase.apiKey}
    NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN: ${secrets.firebase.authDomain}
    NEXT_PUBLIC_FIREBASE_PROJECT_ID: ${secrets.firebase.projectId}
    NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET: ${secrets.firebase.storageBucket}
    NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID: ${secrets.firebase.messagingSenderId}
    NEXT_PUBLIC_FIREBASE_APP_ID: ${secrets.firebase.appId}
    NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID: ${secrets.firebase.measurementId}
